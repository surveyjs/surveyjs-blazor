@page "/run"
@rendermode InteractiveServer

<link href="static/runner.css" rel="stylesheet"/>

<PageTitle>Survey Runner</PageTitle>

<div id="root"></div>

@inject IJSRuntime jsRuntime
@implements IAsyncDisposable
@code{
  private IJSObjectReference? module;
  protected override async Task OnAfterRenderAsync(bool firstRender) {
    await base.OnAfterRenderAsync(firstRender);
    module = await jsRuntime.InvokeAsync<IJSObjectReference>("import", "./static/runner.js");            
    await module.InvokeVoidAsync("init");
  }
  async ValueTask IAsyncDisposable.DisposeAsync() {
    if (module is not null) {
        await module.DisposeAsync();
    }
  }
}